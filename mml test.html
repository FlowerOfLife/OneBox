<script type="text/javascript" src="./js/mml.js"></script>
<script src="js/nexusUI.js"></script>
<script src="js/qwerty-hancock.js"></script>
<script src="js/jquery-1.12.0.js"></script>
<canvas nx="keyboard"></canvas>
<html>

<head>
	<title>NexusUI Demo</title>
	<div id="keyboard"></div>
	<script>
$( document ).ready(function() {

   var contentScript = document.createElement('script');
        var thisContentDiv = document.createElement('div');
        thisContentDiv.id = name + 'id'
        thisContentDiv.appendChild(document.createElement('br'));

        var startSequencerButton = document.createElement('button');
        startSequencerButton.id = name + 'startButton';
         startSequencerButton.className= 'startSeq'
        startSequencerButton.textContent = 'start';
        var stopSequencerButton = document.createElement('button');
        stopSequencerButton.id = name + 'stopButton';
         stopSequencerButton.className= 'stopSeq'
        stopSequencerButton.textContent = 'stop';

        thisContentDiv.appendChild(document.createElement('br'));
        thisContentDiv.appendChild(startSequencerButton);
        
        thisContentDiv.appendChild(stopSequencerButton);
        thisContentDiv.appendChild(document.createElement('br'));
        document.body.appendChild(thisContentDiv)
        console.log( "ready!" );

   var matrix1 = nx.add('matrix', {
                    parent: name + 'id',
                    w: 500,
                    h: 40
                })
                //console.log(matr)

            console.log('hereeeeeeeeeeeeeeeee')
            matrix1.col = 16;
            matrix1.row = 1;
       
            matrix1.init();

            matrix1.on('*', function (data) {

              console.log();
               // console.log(data)
                if (data.list) {

                    for (var i = 0; i < 16; i++) {
                        (function (i) {
                            
                            if (data.list[i] == 1) {

                             //   console.log(matrix1.place,multisliderFreq.val[matrix1.place+1]*1000,multisliderVel.val[matrix1.place+1],multisliderFreq.val)
                                                        }
                        })(i)

                    }

                }
            })

thisContentDiv.appendChild(document.createElement('br'));
          var multisliderFreq = nx.add('multislider', {
                    parent: name + 'id',
                    w: 500,
                    h: 80
                })
multisliderFreq.sliders = 16
multisliderFreq.min = 200
multisliderFreq.max = 800
multisliderFreq.init()

thisContentDiv.appendChild(document.createElement('br'));
          var multisliderVel = nx.add('multislider', {
                    parent: name + 'id',
                    w: 500,
                    h: 80
                })
multisliderVel.sliders = 16
multisliderVel.min = 200
multisliderVel.max = 800
multisliderVel.init()

              startSequencerButton.onclick = function () {
                matrix1.sequence(480);
                matrix1.bpm = 480;
            }

            stopSequencerButton.onclick = function () {
                matrix1.stop();
            }


});
       

		</script>
</head>

<body>





</body>

</html>
<script>


/*

			nx.onload = function() {

			    nx.colorize("accent", "#347");
			    nx.colorize("border", "#bbb");
			    nx.colorize("fill", "#eee");
			    keyboard1.octaves = 3;
			    keyboard1.init()

				for (var key in nx.widgets) {
					nx.widgets[key].on('*', function(data) {
						var d = document.getElementById("tester");
						d.innerHTML = data.midi + "<br>" + d.innerHTML
					})
				}
				var notes = [0,2,4,5,7,9,11];
				for (i=0; i<notes.length; i++) {
					keyboard1.toggle( keyboard1.keys[ notes[i] ], true );
				}




playMMl("t200 o6 l8 e g > e c d g");

function playMMl(){
let mml = "t200 o6 l8 e g > e c d g";
//let config = { context: audioContext };
let mmlEmitter = new MMLEmitter(mml);

mmlEmitter.on("note", (e) => {
    var myNote = JSON.stringify(e);
    var frq = nx.mtof(e.noteNumber);
    var velocity = e.velocity
  console.log("NOTE: " + JSON.stringify(e), nx.mtof(e.noteNumber));

});

mmlEmitter.on("end:all", (e) => {
  console.log("END : " + JSON.stringify(e));
  mmlEmitter.stop();
});

mmlEmitter.start();
}

			}

*/






</script>